# 브라우저가 그려지는 원리 및 가상돔
- 리액트의 주요 특징 중 하나는 가상돔을 사용한다는 것
## 웹 페이지 빌드 과정 (Critical Rendering Path CRP)
- 브라우저가 서버에서 페이지에 대한 HTML 응답을 받고 화면에 표시하기 전에 여러 단계 존재
### 1. DOM tree 생성
- 렌더 엔진이 문서를 읽어들여서 그것들을 파싱하고 어떤 내용을 페이지에 렌더링할지 결정
### 2. Render tree 생성
- 브라우저가 DOM과 CSSOM을 결합하는 곳
- 화면에 보이는 모든 콘텐츠, 스타일 정보 모두 포함하는 최종 렌더링 트리 출력
- **화면에 표시되는 모든 노드의 콘텐츠 및 스타일 정보 포함**
### 3. Layout (reflow)
- 브라우저가 페이지에 표시되는 각 요소의 크기와 위치 계산
### 4. Paint
- 실제 화면에 그리기
## 문제점
- 어떤 인터랙션에 의해 DOM에 변화가 생기면 그 때 마다 Render tree가 재생성 됨 -> 모든 과정 다시 거침
- 인터랙션이 많은 웹이면 작은 변화로 인해 위의 과정을 계속 거치게 되니 불필요하게 DOM을 조작하는 비용이 너무 커짐
## 가상 돔 (Virtual DOM)
- 위의 문제점 해결을 위해 나온 것이 가상 돔
- 실제 DOM을 메모리에 복사해준 것
### 작동 방식
- 데이터가 바뀌면 가상돔에 렌더링되고 이전에 생긴 가상돔과 비교해서 바뀐 부분만 실제 돔에 적용시킴
#### Diffing
- 바뀐 부분을 찾는 과정
#### Reconciliation (재조정)
- 바뀐 부분만 실제 돔에 적용시켜주는 것