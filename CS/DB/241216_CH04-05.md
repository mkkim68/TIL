# 데이터 모델링
## 1. 데이터 모델링과 데이터 모델의 개념
- 데이터 모델링: 현실 세계에 존재하는 데이터를 컴퓨터 세계의 데이터베이스로 옮기는 변환 과정
- 추상화: 현실 세계에서 저장하여 관리할 만한 가치가 있는 중요 데이터만 찾는 작업
- 종류
	- 개념적 모델링: 현실 세계의 대상에 대한 중요 데이터를 추출하여 개념 세계로 옮기는 작업
	- 논리적 모델링: 개념 세계의 데이터를 데이터베이스에 저장할 구조를 결정하고 구조로 표현하는 작업
- 데이터 모델: 데이터 모델링을 쉽게 할 수 있도록 도와주는 도구
	- 구조
	- 연산
	- 제약조건
## 2. 개체-관계 모델
- 개체와 개체 간의 관계를 이용해 현실 세계를 개념적 구조로 표현하는 방법
- 개체-관계 다이어그램(ERD)
### 1. 개체(Entity)
- 현실 세계에서 조직을 운영하는 데 꼭 필요한 사람이나 사물과 같이 구별되는 모든 것
### 2. 속성(Attribute)
- 개체가 가지고 있는 고유한 특성
#### 단일 값 속성과 다중 값 속성
- 단일 값 속성: 특정 개체를 구성하는 속성 값이 하나일 때 (ex. 고객아이디)
- 다중 값 속성: 속성이 값을 여러 개 가질 수 있을 때 (ex. 연락처)
#### 단순 속성과 복합 속성
- 단순 속성: 더는 분해할 수 없는 속성 (ex. 고객아이디)
- 복합 속성: 의미를 분해할 수 있어 값이 여러 개의 의미를 포함함 (ex. 생년월일 - 년,월,일로 분해)
#### 유도 속성
- 값이 별도로 저장되는 것이 아니라 기존의 다른 속성 값에서 유도되어 결정되는 속성
	- ex. 가격-할인율-판매가격(유도 속성)
#### 널 속성
- 널 값이 허용되는 속성
- 널 값
	- 아직 결정되지 않았거나 모르는 값
	- 해당되는 값이 없는, 존재하지 않는 값의 경우
#### 키 속성
- 개체를 구성하는 속성들 중 특별한 역할을 하는 속성
	- 모든 개체 인스턴스의 키 속성 값이 다르므로 식별하는 데 사용함
- 둘 이상의 속성으로 구성하기도 함
### 3. 관계(Relationship)
- 개체와 개체가 맺고 있는 의미 있는 연관성
- 개체 집합들 사이의 대응 관계(매핑)
#### 관계의 유형
- 매핑 원소의 수(매핑 카디널리티)에 따라 분류됨
##### 일대일 관계
- 개체 A의 각 개체 인스턴스가 개체 B의 개체 인스턴스 하나와 관계를 맺고 반대도 마찬가지일때
##### 일대다 관계
- 개체 A의 각 개체 인스턴스는 개체 B의 개체 인스턴스 여러 개와 관계를 맺을 수 있지만 B의 인스턴스는 A의 인스턴스 하나만 관계를 맺을 수 있을 때
##### 다대다 관계
- 개체 A의 각 개체 인스턴스가 개체 B의 개체 인스턴스 여러 개와 관계를 맺을 수 있고 그 반대도 마찬가지일때
#### 관계의 참여 특성
- 필수적 참여
	- 개체 A와 B 사이의 관계에서 개체 A의 모든 개체 인스턴스가 관계에 반드시 참여해야 할 때
	- ERD에서 이중선 표현
- 선택적 참여
	- 개체 A의 개체 인스턴스 중 일부만 관계에 참여해도 될 때
#### 관계의 종속성
- 개체 B(약한 개체)가 개체 A(강한 개체)에 종속되어 있다고 함
	- 개체 B가 독자적으로는 존재할 수 없고 다른 개체 A의 존재 여부에 의존적일 때
- ERD 표현
	- 약한 개체-이중 사각형
	- 강한 개체-이중 마름모
### 4. E-R 다이어그램
- 개체-관계 모델을 이용해 현실 세계를 개념적으로 모델링한 결과물을 그림으로 표현한 것
- 기본 구성 요소
	- 개체: 사각형
	- 개체 간의 관계: 마름모
	- 개체나 관계의 속성: 타원
	- 각 요소를 연결: 링크(연결선)
	- 레이블로 관계 유형 표현
## 3. 논리적 데이터 모델
### 1. 논리적 데이터 모델의 개념과 특성
- 논리적 데이터 모델: ERD로 표현된 개념적 구조를 데이터베이스에 어떤 형태로 저장할지를 논리적으로 표현하는데, 이러한 논리적 구조
- 데이터베이스 스키마: 논리적 데이터 모델로 표현된 데이터베이스의 논리적 구조
### 2. 계층 데이터 모델
- 데이터베이스의 논리적 구조가 트리 형태
- 다대다 관계를 직접 표현할 수 없어 별도의 개체를 추가로 생성하여 표현
- 단점
	- 개체 사이 관계를 정의할 때 여러 제약이 존재하기 때문에 자연스럽게 모델링하기 어려워 구조가 복잡해짐
	- 데이터 삽입,삭제,수정 등 연산이나 검색이 쉽지 않음
### 3. 네트워크 데이터 모델
- 논리적 구조가 그래프 or 네트워크 형태
- 네트워크 데이터 모델
	- 일대다 관계만 표현 가능 (다대다는 두 개체 사이의 일대다 관계를 이용해 표현)
	- 오너, 멤버: 일대다 관계의 개체들 (오너-멤버 관계)
# 관계 데이터 모델
## 1. 관계 데이터 모델의 개념
### 1. 관계 데이터 모델의 기본 용어
- 일반적으로 관계 데이터 모델에서는 하나의 개체에 관한 데이터를 *릴레이션* 하나에 담아 데이터베이스에 저장
#### 속성(attribute)
- 릴레이션의 열
- ex. 고객 릴레이션에 고객과 관련된 속성들
#### 투플(tuple)
- 릴레이션의 행
- ex. 고객 한 명에 대한 실제 속성 값들
#### 도메인(domain)
- 속성 하나가 가질 수 있는 모든 값의 집합 (데이터 타입)
#### 널 값
- 특정 투플의 속성 값을 모르거나 적합한 값이 없는 경우 null이라는 특별한 값 사용
- 특정 속성에 해당되는 값이 없음을 나타냄
#### 차수(degree)
- 하나의 릴레이션에서 속성의 전체 개수
- 최소 1 이상 차수 유지해야 함
#### 카디널리티(cardinality)
- 하나의 릴레이션에서 투플의 전체 개수
- 일반적으로 카디널리티는 자주 변한다는 동적인 특징 가짐
### 2. 릴레이션과 데이터베이스의 구성
#### 릴레이션 스키마
- 릴레이션의 이름과 릴레이션에 포함된 모든 속성의 이름으로 정의하는 릴레이션의 논리적 구조
```
릴레이션이름(속성이름1, 속성이름2, ..., 속성이름n)
```
#### 릴레이션 인스턴스
- 어느 한 시점에 릴레이션에 존재하는 투플들의 집합
#### 데이터베이스 스키마와 데이터베이스 인스턴스
- 데이터베이스 스키마: 데이터베이스를 구성하는 릴레이션들의 스키마를 모아놓은 것
- 데이터베이스 인스턴스: 어느 한 시점에서 데이터베이스에 저장된 데이터 내용의 전체 집합
### 3. 릴레이션의 특성
#### 1. 투플의 유일성: 하나의 릴레이션에는 동일한 투플이 존재할 수 없다
#### 2. 투플의 무순서: 하나의 릴레이션에서 투플 사이의 순서는 무의미하다
#### 3. 속성의 무순서: 하나의 릴레이션에서 속성 사이의 순서는 무의미하다
#### 4. 속성의 원자성: 속성 값으로 원자 값만 사용할 수 있다

### 4. 키의 종류
#### 슈퍼키
- 유일성의 특성을 만족하는 속성 또는 속성들의 집합
#### 후보키
- 유일성과 최소성을 만족하는 속성 또는 속성들의 집합
	- 최소성: 꼭 필요한 최소한의 속성들로만 키 구성
#### 기본키
- 여러 후보키 중에서 기본적으로 사용할 키를 반드시 선택해야 함
- 기본키를 선택할 때 고려하면 도움이 되는 기준
	1. 널 값을 가질 수 있는 속성이 포함된 후보키는 기본키로 부적합하다
	2. 값이 자주 변경될 수 있는 속성이 포함된 후보키는 기본키로 부적합하다
	3. 단순한 후보키를 기본키로 선택한다
#### 대체키
- 기본키로 선택되지 못한 후보키들
#### 외래키
- 어떤 릴레이션에 소속된 속성 또는 속성 집합이 다른 릴레이션의 기본키가 되는 키
	- 릴레이션들 사이 관계를 올바르게 표현하기 위해 필요함
## 2. 관계 데이터 모델의 제약
- 관계 데이터 모델에서 정의하고 있는 기본 제약 사항
	- 무결성 제약조건
		- 어느 시점에 데이터베이스에 저장된 데이터를 의미하는 데이터베이스 상태 또는 데이터베이스 인스턴스가 항상 지켜야 하는 중요한 규칙이라고 할 수 있음
### 1. 개체 무결성 제약조건
- 기본키를 구성하는 모든 속성은 널 값을 가지면 안 된다는 규칙
### 2. 참조 무결성 제약조건
- 외래키는 참조할 수 없는 값을 가질 수 없다는 규칙
- NULL 값인 경우는 무조건 위반했다고 볼 수 없음